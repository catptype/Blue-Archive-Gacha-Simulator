{% extends 'general_app/components/base.html' %} 
{% load static %}

{% block css %}
<!-- <link rel="stylesheet" type="text/css" href="{% static 'css/student-style.css' %}"> -->
{% endblock %}

{% block title %}Student list{% endblock %} 

{% block content %}
<style>
    :root {
        --r1-color: #6BDFFF;
        --r2-color: #FFE400;
        --r3-color: #FEC1F5;
    }

    /* General Card Styling */
    .character-card {
        position: relative;
        height: 300px;
        border: 3px solid transparent;
        border-radius: 12px;
        box-shadow: 0 8px 15px rgba(0, 0, 0, 0.2);
        overflow: hidden;
        transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease;
        background-color: #fff;
    }

    .character-card:hover {
        transform: translateY(-8px);
        box-shadow: 0 12px 20px rgba(0, 0, 0, 0.3);
    }

    /* Card Glow Effects on Hover */
    .r1-card:hover {
        border-color: var(--r1-color);
        box-shadow: 0 0 15px var(--r1-color);
    }

    .r2-card:hover {
        border-color: var(--r2-color);
        box-shadow: 0 0 15px var(--r2-color);
    }

    .r3-card:hover {
        border-color: var(--r3-color);
        box-shadow: 0 0 15px var(--r3-color);
    }

    /* Card Image */
    .character-image {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.3s ease;
    }

    .character-card:hover .character-image {
        transform: scale(1.05);
    }

    /* Rarity Stars and School Icon */
    .school-icon, .rarity-stars {
        position: absolute;
        top: 10px;
        background-color: rgba(255, 255, 255, 0.9);
        border-radius: 50%;
        padding: 5px;
    }

    .school-icon {
        right: 10px;
        width: 40px;
        height: 40px;
    }

    .rarity-stars {
        left: 10px;
        border-radius: 15px;
        display: flex;
        gap: 2px;
        align-items: center;
        padding: 3px 8px;
    }

    .star {
        width: 20px;
        height: 20px;
        background-image: url({% static 'asset/star_rarity.png' %});
        background-size: cover;
    }

    /* Character Name Label */
    .character-label {
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        text-align: center;
        background-color: rgba(255, 255, 255, 0.9);
        padding: 8px;
        font-weight: bold;
        font-size: 1rem;
    }
</style>

<div class="container-fluid container-lg mt-3">
    <div class="row">
        <div class="col p-3 overflow-y-scroll" style="height: 75vh;">
            <div class="row row-cols-2 row-cols-sm-3 row-cols-md-3 row-cols-lg-4 row-cols-xl-5 g-3">
                
                <!-- Loop render card -->
                {% for student in students %}
                <div class="col">
                    <div class="character-card r{{ student.rarity }}-card">
                        <!-- Card image -->
                        <img class="character-image" src="{% url 'serve_student_image' student_id=student.pk %}" alt="{{ student.name }}_{{ student.version }}" loading="lazy">

                        <!-- School icon -->
                        <div class="school-icon">
                            <img src="{% url 'serve_school_image' school_id=student.school_id.pk %}" alt="{{ student.school }}" class="img-fluid">
                        </div>

                        <!-- Rarity icon -->
                        <div class="rarity-stars">
                            {% for _ in ""|rjust:student.rarity %}
                            <span class="star"></span>
                            {% endfor %}
                        </div>

                        <!-- Label name -->
                        <div class="character-label">
                            {{ student.name }}
                            {% if student.version != "Original" %}
                            ({{ student.version }})
                            {% endif %}
                        </div>
                    </div>
                </div>
                {% endfor %}

            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block js %}
<!-- <script defer src="{% static 'js/students.js' %}"></script> -->
{% endblock %}